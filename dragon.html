<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Cursor Effect</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #eee;
        }
        svg {
            position: absolute;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <svg id="canvas"></svg>

    <script>
        const svg = document.getElementById("canvas");
        const N = 30; // Number of segments
        let elems = [];

        // Create elements
        for (let i = 0; i < N; i++) {
            let e = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            e.setAttribute("r", 5);
            e.setAttribute("fill", `hsl(${162 + (4 * (N - i))}, 100%, 50%)`);
            svg.appendChild(e);
            elems.push({ e, x: 0, y: 0 });
        }

        let pointer = { x: window.innerWidth / 2, y: window.innerHeight / 2 };

        document.addEventListener("mousemove", (e) => {
            pointer.x = e.clientX;
            pointer.y = e.clientY;
        });

        function run() {
            requestAnimationFrame(run);

            let e = elems[0];
            const ax = (Math.cos(3 * performance.now() * 0.001) * window.innerWidth) / window.innerHeight;
            const ay = (Math.sin(4 * performance.now() * 0.001) * window.innerHeight) / window.innerWidth;
            
            e.x += (ax + pointer.x - e.x) / 10;
            e.y += (ay + pointer.y - e.y) / 10;

            for (let i = 1; i < N; i++) {
                let e = elems[i];
                let ep = elems[i - 1];
                const a = Math.atan2(ep.y - e.y, ep.x - e.x);
                
                e.x += (ep.x - e.x + Math.cos(a) * (100 - i) / 5) / 4;
                e.y += (ep.y - e.y + Math.sin(a) * (100 - i) / 5) / 4;
                
                e.e.setAttribute("cx", e.x);
                e.e.setAttribute("cy", e.y);
            }
        }

        run();
    </script>
</body>
</html>
